# 11장 코드 구조 따르기

### 범위와 출처에 따른 구조 분류

- 4가지 범주로 구조를 나눔
- <표>
- 매크로 아키텍처: 팀 간 구조에 관한 것
- 마이크로 아키텍처: 팀 내 구조에 관한 것
- 프로세스: 스크럼, 칸반, 프로젝트 모델 등
- 계층: 조직도 등
- 콘웨이 법칙: 조직 구성과 그 조직이 만든 시스템 구조는 닮는 경향이 있음
- 사용자의 행위 또한 구조에 영향을 미침
- 사용자를 재교육할 수 있다면 사용자도 리팩터링 범위에 포함된

### 행위를 코드화하는 세 가지 방법

...

#### 제 흐름에 행위 코드화하기

...

#### 데이터에 행위 코드화하기

- 도구와 컴파일러의 정지문제 사각지대에 빠르게 맞닥뜨리기 때문에 가장 어려움
- 중복된 데이터로 데이터를 구조화하는 경우가 흔함
- 데이터가 변경 가능할 경우 일관성 문제로 이어질 수 있음 (오류의 원인)
- ...

### 구조 노출을 위한 코드 추가

- 리팩터링은 현재 구조를 더 강화하고, 유사한 변경사항을 더 잘 수용할 수 있게함
- 불확실성이 있는 경우, 빠르게 변경할 수 있도록 클래스보다는 열거형, 루프를 사용하는 것이 좋음
- 코드가 성숙해지고 구조가 더 안정되면, 코드도 리팩터링을 통해 구조에 맞게 안정되어야함
- 코드의 견고성은 코드의 방향에 대한 확신을 나타내야함

### 예측 대신 관찰, 그리고 경험적 기술 사용

- 변경 범위를 예측하려는 시도는 코드베이스에 손상을 줄 수 있음
- 확장 가능하거나 일반화된 무언가를 만들려고 하지 않아도 될 것 같음
- 코드가 어떻게 변경될지는 관찰이 필요함

1. 변경되지 않으면 아무것도 하지 마십시오
2. 예측할 수 없이 변경되는 경우 취약성을 피하기 위해서만 리팩터링 하십시오
3. 그렇지 않으면, 과거에 발생한 변경 유형을 적용해 리팩터링 하십시오

### 코드를 이해하지 않고도 안정성을 확보하는 방안

#### 테스트를 통한 안정성 확보

#### 숙달을 통한 안정성 확보

#### 도구의 지원을 통한 안전성 확보

#### 공식 인증을 통한 안정성 확보

#### 내결함성을 통한 안정성 확보

### 확용되지 않은 구조 이용

#### 추출 및 캡슐화에 공백 활용

#### 통합에 중복 코드 활용

#### 캡슐화로 공통 접사 활용

#### 동적 실행으로 런타임 유형 활용

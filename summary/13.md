# 13장 나쁜 코드를 식별 가능하게 만들기

- 안티-리팩터링: 나쁜 코드를 딱 봐도 안 좋아 보이게 만들어서 품질의 수준을 명확히 표시하는 방법
- 코드구조를 손상시키지 않으면서 코드가 보이는 방식만 수정해야함

### 나쁜 코드에 대처하는 자세

- 우리는 주로 코드를 원하는 수준으로 리팩터링하지 못할 때가 많음
- 끔찍하지만 않게 약간의 리팩터링을 수행함
- 그럴싸한 카펫 밑에 숨기는 것보다 엉망진창인 상황을 그대로 두는게 오히려 나음
- 나쁜 코드를 남겨두면 다시 찾기가 쉽고 통제가 지속 가능하지 않다는 신호를 줌

### 깨끗한 코드와 레거시 코드로 분리

- 한눈에 나쁜 코드인지 식별할 수 없으면 놓칠 가능성이 큼
- 잘 만들 수 없다면, 눈에 띄게 만들어야함
- 리팩터링은 깨끗한 상태에 가까운 파일부터 시작하는 것이 좋음
- 리팩타링은 종종 계단식 활동이라, 일부 코드를 좋게 만들려면 주변 코드도 좋게 만들어야함
- 깨진 유리창 이론: 유리창이 하나 깨지고 나면, 곧 어 많은 유리창이 깨짐
- 나쁜 코드가 보이면 드 옆에 나쁜 코드를 많이 널는 것이 쉽기때문에, 전체 파일을 깨끗하게 만들면 보통 그 상태가 더 오래 유지됨

### 나쁜 코드를 찾는 방법

- 이 책의 규칙: 단순하고 구체적인 코드
- ex) 다섯줄 제한 규칙, if문은 시작에만 배치처럼 간단한 규칙으로 쉽게 눈길을 끌 수 있음
- 코드 스멜은 나쁜 코드가 나타내는 증상을 정의하는 방법
- 대부분의 코드 스멜은 많이 연습해야 감각을 키울 수 있음
- 컴퓨터가 나쁜 코드를 찾아내게 할 수도 있음
- 자동화된 코드의 품질 지표 - 순환 복잡도 - 코드를 통과하는 경로의 수 계산
- 각 경로에 대해 테스트가 최소 하나 존재해야하므로 얼마나 많은 테스트를 해야하는지에 대한 하한값 제공
- 인지복잡도: 메서드를 읽는 동안 얼마나 많은 정보를 유지해야하는지
- 들여쓰기를 참고하는 것이 좋음

### 코드를 안전하게 나쁜 코드로 보이기 위한 규칙

1. 올바른 정보를 절대 훼손하지 말 것
2. 향후 리패터링을 어렵게 만들지 말 것
3. 결과를 한 눈에 알 수 있을 것

### 나쁜 코드를 나쁘게 보이기 위한 방법

- 팀이 염두에 둔 코드 스멜을 찾는 방법을 적용

1. 열거형 사용
2. 정수형 및 문자열을 타입 코드로 사용
3. 코드에 매직 넘버 넣기
4. 코드에 주석 넣기
5. 코드에 공백 넣기
6. 이름을 기준으로 항목 그룹화하기
7. 이름에 컨텍스트 추가하기
8. 긴 메서드 만들기
9. 메서드에 많은 매개변수 넘기기
10. getter, setter 사용하기
